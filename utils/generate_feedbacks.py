import os
import json
from pathlib import Path
import random

# –ü–∞–ø–∫–∏ —Å–æ —Å—Ü–µ–Ω–∞–º–∏
SCENES_ROOT = Path(__file__).parent.parent / 'data' / 'scenes'
LANGS = ['ru', 'ky']

# –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
SCENE_FILES = {
    'ru': [
        'base_scenes_ru.json',
        'technical_ru.json',
        'social_economic_ru.json',
        'natural_science_ru.json',
        'humanitarian_ru.json',
        'creative_art_ru.json',
        'applied_technology_ru.json',
    ],
    'ky': [
        'base_scenes_ky.json',
        'technical_ky.json',
        'social_economic_ky.json',
        'natural_science_ky.json',
        'humanitarian_ky.json',
        'creative_art_ky.json',
        'applied_technology_ky.json',
    ]
}

# –ü—Ä–∏–º–µ—Ä—ã —à–∞–±–ª–æ–Ω–æ–≤ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ feedback (–º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å)
FEEDBACK_TEMPLATES_RU = [
    "–¢—ã –≤—ã–±—Ä–∞–ª –ø—É—Ç—å, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç—ã! –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!",
    "–°–º–µ–ª—ã–π –≤—ã–±–æ—Ä! –ü—É—Å—Ç—å —Ç–≤–æ–∏ —Ä–µ—à–µ–Ω–∏—è –≤–µ–¥—É—Ç –∫ —É—Å–ø–µ—Ö—É.",
    "–¢–≤–æ—è –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–µ –∑–Ω–∞–µ—Ç –≥—Ä–∞–Ω–∏—Ü! –¢–∞–∫ –¥–µ—Ä–∂–∞—Ç—å!",
    "–¢—ã —É–º–µ–µ—à—å –º—ã—Å–ª–∏—Ç—å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ ‚Äî —ç—Ç–æ —Ç–≤–æ—è —Å–∏–ª–∞!",
    "–ö–∞–∂–¥—ã–π —à–∞–≥ ‚Äî —ç—Ç–æ —à–∞–≥ –∫ –º–µ—á—Ç–µ. –ù–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Å—è!",
    "–¢—ã –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å –æ–∫—Ä—É–∂–∞—é—â–∏—Ö —Å–≤–æ–∏–º –≤—ã–±–æ—Ä–æ–º!",
    "–¢–≤–æ–π –≤—ã–±–æ—Ä ‚Äî —ç—Ç–æ –Ω–∞—á–∞–ª–æ –±–æ–ª—å—à–æ–≥–æ –ø—É—Ç–∏!",
    "–¢—ã –Ω–µ –±–æ–∏—à—å—Å—è —Ç—Ä—É–¥–Ω–æ—Å—Ç–µ–π –∏ –∏–¥—ë—à—å –≤–ø–µ—Ä—ë–¥!",
    "–¢–≤–æ—è —Ä–µ—à–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–æ–π–Ω–∞ –≤–æ—Å—Ö–∏—â–µ–Ω–∏—è!",
    "–¢—ã —É–º–µ–µ—à—å –Ω–∞—Ö–æ–¥–∏—Ç—å –Ω–µ–æ–±—ã—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è!",
    "–¢—ã ‚Äî –ø—Ä–∏–º–µ—Ä –¥–ª—è –¥—Ä—É–≥–∏—Ö!",
    "–¢–≤–æ–∏ –∏–¥–µ–∏ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω–∏—Ç—å –º–∏—Ä!",
    "–¢—ã –¥–µ–π—Å—Ç–≤—É–µ—à—å —Å —É–º–æ–º –∏ —Å–µ—Ä–¥—Ü–µ–º!",
    "–¢—ã –Ω–µ –±–æ–∏—à—å—Å—è –±—ã—Ç—å —Å–æ–±–æ–π ‚Äî —ç—Ç–æ —Ü–µ–Ω–Ω–æ!",
    "–¢—ã —É–º–µ–µ—à—å –≤–∏–¥–µ—Ç—å —Å—É—Ç—å –≤–µ—â–µ–π!",
    "–¢–≤–æ–π –≤—ã–±–æ—Ä ‚Äî —ç—Ç–æ —Ç–≤–æ—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å!",
    "–¢—ã –Ω–µ –±–æ–∏—à—å—Å—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å!",
    "–¢—ã —É–º–µ–µ—à—å –≤–¥–æ—Ö–Ω–æ–≤–ª—è—Ç—å –¥—Ä—É–≥–∏—Ö!",
    "–¢—ã –≤—Å–µ–≥–¥–∞ –Ω–∞—Ö–æ–¥–∏—à—å –≤—ã—Ö–æ–¥ –∏–∑ –ª—é–±–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏!",
    "–¢—ã ‚Äî –Ω–∞—Å—Ç–æ—è—â–∏–π –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å!",
]

FEEDBACK_TEMPLATES_KY = [
    "–°–µ–Ω —Ç–∞–Ω–¥–∞–≥–∞–Ω –∂–æ–ª ‚Äî –∂–∞“£—ã –º“Ø–º–∫“Ø–Ω—á“Ø–ª“Ø–∫—Ç”©—Ä–≥”© –∞—á—ã–ª–∞—Ç! –ê–ª–≥–∞!",
    "–ö–∞–π—Ä–∞—Ç—Ç—É—É —Ç–∞–Ω–¥–æ–æ! –ê—Ä –±–∏—Ä –∫–∞–¥–∞–º—ã“£ –∏–π–≥–∏–ª–∏–∫–∫–µ –∂–µ—Ç–∫–∏—Ä—Å–∏–Ω.",
    "–°–µ–Ω–∏–Ω –∫—Ä–µ–∞—Ç–∏–≤–¥“Ø“Ø–ª“Ø–≥“Ø“£ —á–µ–∫—Å–∏–∑! –£—à—É–Ω–¥–∞–π –±–æ–ª!",
    "–°–µ–Ω ”©–∑–≥”©—á”© –æ–π–ª–æ–π—Å—É“£ ‚Äî –±—É–ª —Å–µ–Ω–∏–Ω –∫“Ø—á“Ø“£!",
    "–ê—Ä –±–∏—Ä –∫–∞–¥–∞–º ‚Äî –∫—ã—è–ª–≥–∞ –∂–∞–∫—ã–Ω–¥–æ–æ. –¢–æ–∫—Ç–æ–±–æ!",
    "–°–µ–Ω–∏–Ω —Ç–∞–Ω–¥–æ–æ“£ –±–∞—à–∫–∞–ª–∞—Ä–¥—ã —à—ã–∫—Ç–∞–Ω–¥—ã—Ä–∞—Ç!",
    "–¢–∞–Ω–¥–æ–æ“£ ‚Äî —á–æ“£ –∂–æ–ª–¥—É–Ω –±–∞—à—Ç–∞–ª—ã—à—ã!",
    "–°–µ–Ω –∫—ã–π—ã–Ω—á—ã–ª—ã–∫—Ç–∞–Ω –∫–æ—Ä–∫–ø–æ–π—Å—É“£, –∞–ª–¥—ã–≥–∞ –±–∞—Ä–∞—Å—ã“£!",
    "–°–µ–Ω–∏–Ω —á–µ—á–∫–∏–Ω–¥“Ø“Ø–ª“Ø–≥“Ø“£ —Å—É–∫—Ç–∞–Ω–∞—Ä–ª—ã–∫!",
    "–°–µ–Ω –∞—Ä –¥–∞–π—ã–º ”©–∑–≥”©—á”© —á–µ—á–∏–º —Ç–∞–±–∞—Å—ã“£!",
    "–°–µ–Ω ‚Äî –±–∞—à–∫–∞–ª–∞—Ä–≥–∞ “Ø–ª–≥“Ø!",
    "–°–µ–Ω–∏–Ω –∏–¥–µ—è–ª–∞—Ä—ã“£ –¥“Ø–π–Ω”©–Ω“Ø ”©–∑–≥”©—Ä—Ç”© –∞–ª–∞—Ç!",
    "–°–µ–Ω –∞–∫—ã–ª –∂–∞–Ω–∞ –∂“Ø—Ä”©–∫ –º–µ–Ω–µ–Ω –∏—à –∫—ã–ª–∞—Å—ã“£!",
    "–°–µ–Ω ”©–∑“Ø–Ω –±–æ–ª—É—É–¥–∞–Ω –∫–æ—Ä–∫–ø–æ–π—Å—É“£ ‚Äî –±—É–ª –±–∞–∞–ª—É—É!",
    "–°–µ–Ω –Ω–µ—Ä—Å–µ–ª–µ—Ä–¥–∏–Ω –º–∞“£—ã–∑—ã–Ω –∫”©—Ä”© –∞–ª–∞—Å—ã“£!",
    "–¢–∞–Ω–¥–æ–æ“£ ‚Äî —Å–µ–Ω–∏–Ω —É–Ω–∏–∫–∞–ª–¥—É—É–ª—É–≥—É“£!",
    "–°–µ–Ω —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—Ç–µ–Ω –∫–æ—Ä–∫–ø–æ–π—Å—É“£!",
    "–°–µ–Ω –±–∞—à–∫–∞–ª–∞—Ä–¥—ã —à—ã–∫—Ç–∞–Ω–¥—ã—Ä–∞ –∞–ª–∞—Å—ã“£!",
    "–°–µ–Ω –∞—Ä –¥–∞–π—ã–º –∞—Ä –∫–∞–Ω–¥–∞–π –∫—ã—Ä–¥–∞–∞–ª–¥–∞–Ω –∂–æ–ª —Ç–∞–±–∞—Å—ã“£!",
    "–°–µ–Ω ‚Äî —á—ã–Ω—ã–≥—ã –∏–∑–∏–ª–¥”©”©—á“Ø!",
]

def generate_inspiring_feedback(option_text, lang='ru'):
    """
    –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏–π, –∫—Ä–∞—Å–∏–≤—ã–π, –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω—ã–π feedback —Å —ç–º–æ–¥–∑–∏ –¥–ª—è –æ–ø—Ü–∏–∏.
    """
    # –ü—Ä–∏–º–µ—Ä—ã —à–∞–±–ª–æ–Ω–æ–≤ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∫—ã—Ä–≥—ã–∑—Å–∫–æ–≥–æ
    templates_ru = [
        "{emoji} –¢—ã –≤—ã–±—Ä–∞–ª –ø—É—Ç—å, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç—ã! –ü—É—Å—Ç—å —Ç–≤–æ–∏ —Ä–µ—à–µ–Ω–∏—è –≤–µ–¥—É—Ç –∫ —É—Å–ø–µ—Ö—É. –í–ø–µ—Ä—ë–¥ –∫ –º–µ—á—Ç–µ! {extra}",
        "{emoji} –ö–∞–∂–¥—ã–π —Ç–≤–æ–π –≤—ã–±–æ—Ä ‚Äî —à–∞–≥ –∫ –≤–µ–ª–∏–∫–∏–º –æ—Ç–∫—Ä—ã—Ç–∏—è–º. –ù–µ –±–æ–π—Å—è –±—ã—Ç—å —Å–æ–±–æ–π, –≤–µ–¥—å –∏–º–µ–Ω–Ω–æ —Ç—ã —Ç–≤–æ—Ä–∏—à—å —Å–≤–æ—é –∏—Å—Ç–æ—Ä–∏—é! {extra}",
        "{emoji} –¢—ã –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å –æ–∫—Ä—É–∂–∞—é—â–∏—Ö —Å–≤–æ–∏–º —Å–º–µ–ª—ã–º —Ä–µ—à–µ–Ω–∏–µ–º! –ü—É—Å—Ç—å —É–¥–∞—á–∞ –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –Ω–∞ —Ç–≤–æ–µ–π —Å—Ç–æ—Ä–æ–Ω–µ. {extra}",
        "{emoji} –¢—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ –æ—Ç–≤–µ—á–∞–µ—à—å ‚Äî —Ç—ã —Å–æ–∑–¥–∞—ë—à—å –±—É–¥—É—â–µ–µ! –ü—Ä–æ–¥–æ–ª–∂–∞–π –∏–¥—Ç–∏ –≤–ø–µ—Ä—ë–¥, –≤–µ–¥—å —Ç–≤–æ–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –±–µ–∑–≥—Ä–∞–Ω–∏—á–µ–Ω. {extra}",
        "{emoji} –¢—ã ‚Äî –≥–µ—Ä–æ–π —ç—Ç–æ–≥–æ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è! –ü—É—Å—Ç—å —Ç–≤–æ—è —ç–Ω–µ—Ä–≥–∏—è –∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞–∂–≥—É—Ç –Ω–æ–≤—ã–µ –∑–≤—ë–∑–¥—ã –Ω–∞ —Ç–≤–æ—ë–º –ø—É—Ç–∏. {extra}",
    ]
    templates_ky = [
        "{emoji} –°–µ–Ω —Ç–∞–Ω–¥–∞–≥–∞–Ω –∂–æ–ª ‚Äî –∂–∞“£—ã –º“Ø–º–∫“Ø–Ω—á“Ø–ª“Ø–∫—Ç”©—Ä–≥”© –∞—á—ã–ª–∞—Ç! –ê—Ä –±–∏—Ä –∫–∞–¥–∞–º—ã“£ –∏–π–≥–∏–ª–∏–∫–∫–µ –∂–µ—Ç–∫–∏—Ä—Å–∏–Ω. {extra}",
        "{emoji} –°–µ–Ω–∏–Ω —á–µ—á–∏–º–∏“£ ‚Äî –±—É–ª —Å–µ–Ω–∏–Ω –∫“Ø—á“Ø“£! –ê—Ä –¥–∞–π—ã–º –∞–ª–≥–∞, —Å–µ–Ω–∏–Ω –º“Ø–º–∫“Ø–Ω—á“Ø–ª“Ø–∫—Ç”©—Ä“Ø“£ —á–µ–∫—Å–∏–∑! {extra}",
        "{emoji} –°–µ–Ω –±–∞—à–∫–∞–ª–∞—Ä–¥—ã —à—ã–∫—Ç–∞–Ω–¥—ã—Ä–∞ –∞–ª–∞—Å—ã“£! –ê—Ä –±–∏—Ä –∫–∞–¥–∞–º—ã“£ ‚Äî –∂–∞“£—ã –∞—á—ã–ª—ã—à—Ç–∞—Ä–≥–∞ –∂–æ–ª. {extra}",
        "{emoji} –°–µ–Ω ‚Äî –±—É–ª –æ–∫—É—è–Ω—ã–Ω –±–∞–∞—Ç—ã—Ä—ã—Å—ã“£! –ö—ã—è–ª–¥–∞—Ä—ã“£–∞ –∂–µ—Ç“Ø“Ø “Ø—á“Ø–Ω –±–∏—Ä –∫–∞–¥–∞–º –∫–∞–ª–¥—ã. {extra}",
        "{emoji} –°–µ–Ω–∏–Ω —Ç–∞–Ω–¥–æ–æ“£ ‚Äî –±—É–ª —Å–µ–Ω–∏–Ω –∫–µ–ª–µ—á–µ–≥–∏“£! –ê—Ä –¥–∞–π—ã–º –∏—à–µ–Ω –∂–∞–Ω–∞ –∞—Ä–∞–∫–µ—Ç –∫—ã–ª! {extra}",
    ]
    # –≠–º–æ–¥–∑–∏ –ø–æ –ø—Ä–æ—Ñ–∏–ª—é/–Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—é
    emojis = ["‚ú®", "üöÄ", "üåü", "üî•", "ü¶ä", "üß≠", "üß†", "üí°", "üéØ", "üåà", "ü¶∏", "ü¶Ñ", "üí´", "üéâ", "üèÜ", "üóùÔ∏è"]
    extra_ru = random.choice(["–¢—ã –Ω–∞ –≤–µ—Ä–Ω–æ–º –ø—É—Ç–∏!", "–í–ø–µ—Ä—ë–¥, –∫ –Ω–æ–≤—ã–º –≤–µ—Ä—à–∏–Ω–∞–º!", "–ú–∏—Ä –∂–¥—ë—Ç —Ç–≤–æ–∏—Ö –æ—Ç–∫—Ä—ã—Ç–∏–π!", "–°–º–µ–ª–æ –∏–¥–∏ –≤–ø–µ—Ä—ë–¥!", "–¢–≤–æ—è —ç–Ω–µ—Ä–≥–∏—è –∑–∞—Ä—è–∂–∞–µ—Ç!", "–¢—ã —Å–ø–æ—Å–æ–±–µ–Ω(–∞) –Ω–∞ –±–æ–ª—å—à–µ–µ!"])
    extra_ky = random.choice(["–°–µ–Ω–∏–Ω –∫“Ø—á“Ø“£ —á–µ–∫—Å–∏–∑!", "–ê–ª–≥–∞, –±–∞–∞—Ç—ã—Ä!", "–ñ–∞“£—ã –∞—á—ã–ª—ã—à—Ç–∞—Ä –∫“Ø—Ç”©—Ç!", "–°–µ–Ω–∏–Ω —ç–Ω–µ—Ä–≥–∏—è“£ –∫“Ø—á—Ç“Ø“Ø!", "–°–µ–Ω –±–∞–∞—Ä—ã–Ω–∞ –∂–µ—Ç–∏—à–µ—Å–∏“£!"])
    if lang == 'ru':
        template = random.choice(templates_ru)
        extra = extra_ru
    else:
        template = random.choice(templates_ky)
        extra = extra_ky
    emoji_choice = random.choice(emojis)
    feedback = template.format(emoji=emoji_choice, extra=extra)
    # –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –ª–∏–º–∏—Ç 200 —Å–∏–º–≤–æ–ª–æ–≤
    if len(feedback) > 200:
        feedback = feedback[:197] + '...'
    return feedback

def update_feedbacks_in_file(path, lang):
    with open(path, encoding='utf-8') as f:
        scenes = json.load(f)
    changed = False
    for scene in scenes:
        for option in scene.get('options', []):
            # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–π feedback
            feedback = generate_inspiring_feedback(option['text'], lang)
            if option.get('feedback') != feedback:
                option['feedback'] = feedback
                changed = True
    if changed:
        with open(path, 'w', encoding='utf-8') as f:
            json.dump(scenes, f, ensure_ascii=False, indent=2)
        print(f"–û–±–Ω–æ–≤–ª–µ–Ω–æ: {path}")
    else:
        print(f"–ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π: {path}")

def main():
    for lang in LANGS:
        for fname in SCENE_FILES[lang]:
            path = SCENES_ROOT / lang / fname
            if path.exists():
                update_feedbacks_in_file(path, lang)
            else:
                print(f"–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω: {path}")

if __name__ == "__main__":
    main() 